<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Admin - PÅ™idat svetr</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="config.js"></script>
</head>
<body style="font-family: sans-serif; background: #f4f4f4; display: flex; justify-content: center; padding: 50px;">

    <div style="background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); width: 100%; max-width: 400px;">
        <h1 style="text-align: center; color: #333;">NovÃ½ produkt</h1>
        
        <label>NÃ¡zev svetru:</label>
        <input type="text" id="name" placeholder="NapÅ™. ModrÃ½ vlnÄ›nÃ½ svetr" style="width: 100%; padding: 10px; margin: 10px 0 20px 0; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box;">

        <label>Cena (KÄ):</label>
        <input type="number" id="price" placeholder="1200" style="width: 100%; padding: 10px; margin: 10px 0 20px 0; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box;">

        <label>Cesta k fotce na GitHubu:</label>
        <input type="text" id="photoPath" placeholder="fotky/svetr1.jpg" style="width: 100%; padding: 10px; margin: 10px 0 5px 0; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box;">
        <p style="font-size: 0.8em; color: #666; margin-bottom: 20px;">
            DÅ¯leÅ¾itÃ©: MusÃ­ to zaÄÃ­nat <b>fotky/</b> a pak nÃ¡zev souboru.
        </p>

        <button onclick="ulozDoDatabaze()" id="saveBtn" style="width: 100%; padding: 15px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 1.1em;">
            ğŸš€ UloÅ¾it na e-shop
        </button>

        <div id="status" style="margin-top: 20px; text-align: center; font-weight: bold;"></div>
        
        <hr style="margin: 30px 0; border: 0; border-top: 1px solid #eee;">
        <a href="index.html" style="display: block; text-align: center; color: #666; text-decoration: none;">â† ZpÄ›t na web</a>
    </div>

    <script>
        function ulozDoDatabaze() {
            const name = document.getElementById('name').value;
            const price = document.getElementById('price').value;
            const photo = document.getElementById('photoPath').value;
            const status = document.getElementById('status');
            const btn = document.getElementById('saveBtn');

            if (!name || !price || !photo) {
                status.style.color = "red";
                status.innerText = "âŒ VyplÅˆ prosÃ­m vÅ¡echna pole!";
                return;
            }

            btn.disabled = true;
            status.style.color = "orange";
            status.innerText = "â³ UklÃ¡dÃ¡m...";

            // UloÅ¾enÃ­ do Firebase Realtime Database
            db.ref('produkty').push({
                jmeno: name,
                cena: price,
                img: photo // Tady se uloÅ¾Ã­ text napÅ™. "fotky/svetr.jpg"
            })
            .then(() => {
                status.style.color = "green";
                status.innerText = "âœ… Svetr byl ÃºspÄ›Å¡nÄ› pÅ™idÃ¡n!";
                
                // VymazÃ¡nÃ­ polÃ­ pro dalÅ¡Ã­ vloÅ¾enÃ­
                document.getElementById('name').value = "";
                document.getElementById('price').value = "";
                document.getElementById('photoPath').value = "";
                btn.disabled = false;
            })
            .catch((error) => {
                status.style.color = "red";
                status.innerText = "âŒ Chyba: " + error.message;
                btn.disabled = false;
            });
        }
    </script>

</body>
</html>
